<!DOCTYPE html>
<html>
<head>
  <!-- Add Bootstrap CSS link -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
  <title>My Food Project</title>
  <style>
    .recipes-container {
      background-color: #87baf0;
      border-radius: 10px; 
      padding: 20px; 
      margin-bottom: 20px; 
    }

    #get {
      background-color: #c5e3ff; 
      color:#2d2d2d ;
      font-weight: bold;
      border-width: 1,5px;
    }
  </style>
</head>
<body>
  <!-- Include the header partial -->
  <!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Bootstrap demo</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
    <link rel="stylesheet" href="/JavaScript/JSON 1/5.7/public/styles/style.css">
  </head>
  <body>
    <nav class="navbar navbar-expand-md navbar-dark bg-dark mb-4">
        <a class="navbar-brand" href="#">Your food page</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarCollapse">
          <ul class="navbar-nav mr-auto">
            <li class="nav-item active">
              <a class="nav-link" href="#">Home <span class="sr-only"></span></a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#">Pricing</a>
            </li>
            <li class="nav-item">
              <a class="nav-link disabled" href="#" tabindex="-1" aria-disabled="true">Premium Version</a>
            </li>
          </ul>
        </div>
      </nav>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-HwwvtgBNo3bZJJLYd8oVXjrBZt8cqVSpeBNS5n7C8IVInixGAoxmnlMuBnhbgrkm" crossorigin="anonymous"></script>
  </body>
</html>

  <main>
    <!-- Your main content goes here -->
    <h1>Welcome to the recipe finder</h1>
    <p>Here you can get ideas for cooking something based on your nutrients needs.</p>
    <div class="container mt-5">
      <form id="myForm" method="post">
        <div class="row">
          <div class="col-md-6">
            <label for="idInput">Maximum Calories:</label>
            <input type="number" class="form-control" id="maxCaloriesInput" name="maxCalories" placeholder="Enter maximum cals">
          </div>
          <div class="col-md-6">
            <label for="secretInput">Minimum Protein:</label>
            <input type="number" class="form-control" id="minProteinInput" name="minProtein" placeholder="Enter minimum protein">
          </div>
        </div>
        <div class="row mt-md-3">
          <div class="col-md-6">
            <label for="scoreInput">Minimum Carbohidrates:</label>
            <input type="number" class="form-control" id="minCarbInput" name="minCarbs" placeholder="Enter minimum carbs">
          </div>
          <div class="col-md-6">
            <label for="scoreInput">Minimum Fat:</label>
            <input type="number" class="form-control" id="minFatInput" name="minFat" placeholder="Enter minimum fat">
          </div>
        </div>
        <div class="row mt-3">
          <div class="col-md-12 d-flex justify-content-center">
            <input id="get" class="btn btn-primary" type="submit" value="SEARCH" formaction="/get-recipe">
          </div>
        </div>
      </form>
    </div>

    <div class="container mt-5 recipes-container"> 
      <h1>Recipes</h1>
      <div class="container">
      <div class="row">
      
        
      
    </div>
  </main>

  <!-- Include the footer partial -->
  
<footer>
    <div class = container >
    <footer class="d-flex flex-wrap justify-content-between align-items-center py-3 my-4 border-top">
        <div class="col-md-4 d-flex align-items-center">
          <a href="/" class="mb-3 me-2 mb-md-0 text-body-secondary text-decoration-none lh-1">
             <img class="featurette-image img-fluid mx-auto" src="/JavaScript/JSON 1/5.7/public/images/Logo.jpg" alt="Logo" width="30" height="24"> 
          <span class="mb-3 mb-md-0 text-body-secondary">Â© Andres 2023 Company, Inc</span>
        </div>
    
        <ul class="nav col-md-4 justify-content-end list-unstyled">
            <li style="display: inline-block;">
              <img class="featurette-image img-fluid mx-auto" src="/JavaScript/JSON 1/5.7/public/images/instagram-svgrepo-com.png" alt="insta" width="24" height="24">
            </li>
            <li style="display: inline-block;">
              <img class="featurette-image img-fluid mx-auto" src="/JavaScript/JSON 1/5.7/public/images/linkedin-svgrepo-com.png" alt="LinkedIn" width="24" height="24">
            </li>
            <li style="display: inline-block;">
              <img class="featurette-image img-fluid mx-auto" src="/JavaScript/JSON 1/5.7/public/images/twitter-svgrepo-com.png" alt="Twitter" width="22" height="21">
            </li>
          </ul>
      </footer>



<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
<script>
  document.addEventListener("DOMContentLoaded", () => {
    // Attach click event to "Show Complete Recipe" links
    const showDetailsLinks = document.querySelectorAll(".show-details-link");
    showDetailsLinks.forEach(link => {
      link.addEventListener("click", async (event) => {
        event.preventDefault();
        const recipeId = link.dataset.id;
      
        try {
          const response = await axios.get(`/recipe/${recipeId}`);
          const recipeDetails = response.data;

          const cardBody = link.closest(".card-body");

          if (cardBody) {

            const healthScoreContainer = cardBody.querySelector(".health-score-container");
                if (healthScoreContainer) {
                    healthScoreContainer.innerHTML = "Health Score: " + recipeDetails.healthScore;
                    healthScoreContainer.style.display = "block"; 
                }
            const dietsContainer = cardBody.querySelector(".diets-container");
                if (dietsContainer) {
                    dietsContainer.innerHTML = "Diets: " + recipeDetails.diets.join(", ");
                    dietsContainer.style.display = "block";
                }
            const readyInMinutesContainer = cardBody.querySelector(".ready-in-minutes-container");
                if (readyInMinutesContainer) {
                    readyInMinutesContainer.innerHTML = "Ready in Minutes: " + recipeDetails.readyInMinutes;
                    readyInMinutesContainer.style.display = "block"; 
                }
            const summaryContainer = cardBody.querySelector(".summary-container");
                if (summaryContainer) {
                  summaryContainer.innerHTML = "Summary: " + recipeDetails.summary;
                  summaryContainer.style.display = "block";
                }
            const ingredientsContainer = cardBody.querySelector(".ingredients-container");
            if (ingredientsContainer) {
              // Loop through the extended ingredients and display the originalString
              const extendedIngredients = recipeDetails.extendedIngredients;
              let ingredientsHTML = "<h3>Ingredients:</h3><ul>";
              extendedIngredients.forEach(ingredient => {
                ingredientsHTML += `<li>${ingredient.original}</li>`;
              });
              ingredientsHTML += "</ul>";
              ingredientsContainer.innerHTML = ingredientsHTML;
              ingredientsContainer.style.display = "block";
          } else {
            const noIngredientsMessage = document.createElement("li");
            noIngredientsMessage.textContent = "No ingredients information available.";
            ingredientsContainer.appendChild(noIngredientsMessage);
          }
            
          }
            const instructionsContainer = cardBody.querySelector(".instructions-container");
            if (instructionsContainer) {
              // Check if instructions are null / sometimes this API does not provide instructions
              const instructions = recipeDetails.instructions;
              if (instructions && instructions !== "null") {
                instructionsContainer.innerHTML = `<h3>Instructions:</h3><p>${instructions}</p>`;
              } else {
                instructionsContainer.innerHTML = "<p>No detailed instructions for this recipe are available.</p>";
              }
              instructionsContainer.style.display = "block"; // Show the instructions container
            }
          }

         catch (error) {
          console.error("Error fetching recipe information:", error);
        }
      });
    });
  });
</script>
</body>
</html>